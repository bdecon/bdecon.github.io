<!DOCTYPE html>
<html lang="en">
<head>
	<meta id="meta" name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>BD Economics | Census API Guide, Part 2</title>
	<link rel="stylesheet" href="add-ins/github.css">
	<script src="add-ins/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<meta charset="UTF-8">
	<meta name="description" content="Python tutorial: Retrieve international trade data from the Census Bureau API to analyze U.S. exports by trading partner.">
	<meta name="keywords" content="Census API, Census Bureau API, International Trade, US Exports, Python Census API, Trade Data, Economics Dashboard, Macroeconomics Dashboard, US economy, Python pandas requests, trade partners">
	<meta name="author" content="Brian Dew">
	<link rel="canonical" href="https://bd-econ.com/censusapi2.html">
	<!-- Open Graph -->
	<meta property="og:title" content="Census API Guide, Part 2">
	<meta property="og:description" content="Python tutorial: Retrieve international trade data from the Census Bureau API to analyze U.S. exports by trading partner.">
	<meta property="og:url" content="https://bd-econ.com/censusapi2.html">
	<meta property="og:type" content="article">
	<meta property="og:image" content="https://bd-econ.com/images/01_bdlogo.png">
	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:title" content="Census API Guide, Part 2">
	<meta name="twitter:description" content="Python tutorial: Retrieve international trade data from the Census Bureau API to analyze U.S. exports by trading partner.">
	<meta name="twitter:image" content="https://bd-econ.com/images/01_bdlogo.png">
	<link rel="apple-touch-icon" sizes="57x57" href="favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="favicon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="favicon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
	<link rel="manifest" href="favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="favicon/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "headline": "Census API Python Tutorial, Part 2",
    "description": "Python tutorial: Retrieve international trade data from the Census Bureau API to analyze U.S. exports by trading partner.",
    "author": {
        "@type": "Person",
        "name": "Brian Dew"
    },
    "publisher": {
        "@type": "Organization",
        "name": "BD Economics",
        "url": "https://bd-econ.com"
    },
    "mainEntityOfPage": "https://bd-econ.com/censusapi2.html"
}
</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PGVF5S620Y"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PGVF5S620Y');
</script>

</head>
<body>
	<nav>
		<ul class="ul_nav" id="menu">
			<li class="nav_main"> <a href="index.html">BD Economics</a> </li>
			<li><a href="about.html">About</a> </li>
			<li><a href="https://briandew.wordpress.com">Blog</a> </li>
			<li><a href="python.html" class="active">Guides &darr;</a>
				<ul class="hidden">
					<li><a href="imfapi1.html">IMF API</a></li>
					<li><a href="blsapi.html">BLS API</a></li>
					<li><a href="beaapi.html">BEA API</a></li>
					<li><a href="censusapi.html">Census API</a></li>
					<li><a href="treasuryapi.html">Treasury API</a></li>
					<li><a href="cps.html">CPS Microdata</a></li>
			</ul>
			</li>
		<li>
			<a href="reports.html">Reports &darr;</a>
			<ul class="hidden">
				<li><a href="chartbook.html">US Chartbook</a></li>
				<li><a href="indicators.html">Economic Indicators</a></li>
			</ul>
			</li>
			<li class="icon">
				<button type="button" onclick="responsiveNav()" aria-label="Toggle navigation menu" aria-expanded="false">&#9776;</button>
			</li>
		</ul>
	</nav>
	<header>
	<h1>Census API</h1>
	</header>
	<main>
	<section>
	<article class="article_links">
	<a href="censusapi.html">
	<div class="card_dull">
	  <div class="card_banner_wrap card_banner_wrap_green">
	    <img src="images/census_banner.png" alt="" class="card_banner">
	  </div>
	  <div class="card_head_green">
		<h2>Part 1</h2>
	  </div>
	  <div class="card_tail">
		<p>A <strong>basic example</strong> of retrieving manufacturing data from the M3 survey, processing with pandas, and plotting results.</p>
	  </div>
	</div>
	</a>
	<a href="censusapi2.html">
	<div class="card">
	  <div class="card_banner_wrap card_banner_wrap_green">
	    <img src="images/census_banner2.png" alt="" class="card_banner">
	  </div>
	  <div class="card_head_green">
		<h2>Part 2</h2>
	  </div>
	  <div class="card_tail">
		<p>Retrieve <strong>international trade data</strong> from the Census API to analyze U.S. exports by trading partner.</p>
	  </div>
	</div>
	</a>
	</article>
	<article class="article_code">
	<h3> Census International Trade API with Python </h3>
	<p>The <a href="https://www.census.gov/data/developers/data-sets/international-trade.html">Census International Trade API</a> provides access to detailed U.S. import and export data by country, commodity, and time period. This tutorial demonstrates how to retrieve export data and identify top U.S. trading partners.</p>

	<h3 class="section-title">Background</h3>
	<h4>International Trade Statistics</h4>
	<p>The Census Bureau collects data on U.S. merchandise trade through customs declarations. The international trade dataset includes monthly statistics on exports and imports by partner country and product category.</p>

	<h4>Key Variables</h4>
	<p>The main variables we'll use are:</p>
	<ul>
		<li><p><code>CTY_CODE</code> - Country code identifying the trading partner. Codes 1000-8000 represent individual countries (excluding regional aggregates).</p></li>
		<li><p><code>CTY_NAME</code> - Country name for display purposes.</p></li>
		<li><p><code>ALL_VAL_MO</code> - Total value of exports for the month in U.S. dollars.</p></li>
	</ul>
	<p>The full list of variables is available in the <a href="https://api.census.gov/data/timeseries/intltrade/exports/hs/variables.html">API documentation</a>.</p>

	<h3 class="section-title">Example: Top U.S. Export Partners</h3>
	<h4>Setup</h4>
	<p>Import the required packages and load your Census API key from a local config file. You can register for a free API key at the <a href="https://api.census.gov/data/key_signup.html">Census Bureau website</a>.</p>

	<p>In[1]:</p>
	<pre><code class="python">import requests
import pandas as pd
import matplotlib.pyplot as plt
import config

key = config.census_key</code></pre>

	<h4>Build the API Request</h4>
	<p>Construct the API URL to retrieve export values by country for a specific month. The endpoint <code>intltrade/exports/hs</code> provides Harmonized System trade data.</p>

	<p>In[2]:</p>
	<pre><code class="python">base = 'https://api.census.gov/data/timeseries/intltrade/exports/hs'
param = 'CTY_CODE,CTY_NAME,ALL_VAL_MO'
time = '2025-10'

url = f'{base}?get={param}&key={key}&time={time}'</code></pre>

	<h4>Request Data from the API</h4>
	<p>Make the request and check that it was successful before parsing the JSON response.</p>

	<p>In[3]:</p>
	<pre><code class="python">r = requests.get(url)

if r.status_code == 200:
    data = r.json()
else:
    print(f'Error: {r.status_code}')</code></pre>

	<p>The response contains a list of lists, with the first row being column headers:</p>

	<p>In[4]:</p>
	<pre><code class="python">data[:3]</code></pre>
	<p>Out[4]:</p>
<pre>[['CTY_CODE', 'CTY_NAME', 'ALL_VAL_MO', 'time'],
 ['0001', 'OPEC', '5765070418', '2025-10'],
 ['0003', 'PACIFIC RIM', '35817684498', '2025-10']]</pre>

	<h4>Process the Data</h4>
	<p>Convert to a DataFrame, filter to individual countries (codes 1000-8000), and convert values to numeric billions.</p>

	<p>In[5]:</p>
	<pre><code class="python">df = pd.DataFrame(data[1:], columns=data[0])

# Filter to individual countries only (exclude aggregates)
df = df.loc[df['CTY_CODE'].str.isdigit()]
df['CTY_CODE'] = df['CTY_CODE'].astype(int)
df = df[(df['CTY_CODE'] >= 1000) & (df['CTY_CODE'] < 8000)]

# Convert to billions
df['ALL_VAL_MO'] = df['ALL_VAL_MO'].astype(float) / 1e9</code></pre>

	<h4>Select Top Partners</h4>
	<p>Sort by export value and select the top 20 trading partners.</p>

	<p>In[6]:</p>
	<pre><code class="python">top20 = (df.sort_values('ALL_VAL_MO', ascending=True)
           .tail(20)
           .set_index('CTY_NAME')['ALL_VAL_MO'])</code></pre>

	<h4>Create the Visualization</h4>
	<p>Plot a horizontal bar chart showing the top export destinations.</p>

	<p>In[7]:</p>
	<pre><code class="python">fig, ax = plt.subplots(figsize=(8, 8))
top20.plot(kind='barh', ax=ax, color='#4a7c59')
ax.set_xlabel('')
ax.set_ylabel('')
ax.axis('off')

# Add value labels
for i, (country, val) in enumerate(top20.items()):
    ax.text(-0.5, i, country, ha='right', va='center', fontsize=10)
    ax.text(val + 0.3, i, f'${val:.1f}B', ha='left', va='center', fontsize=10)

ax.set_title('Top 20 U.S. Export Destinations, October 2025\n', fontsize=12)
plt.tight_layout()
plt.show()</code></pre>
	<p>Out[7]:</p>
	<img src="images/census_example2.png" alt="Top 20 U.S. Export Partners" loading="lazy"/>

	<h3 class="section-title">Additional Resources</h3>
	<ul>
		<li><p><a href="https://www.census.gov/data/developers/data-sets/international-trade.html">Census International Trade API</a> - Main documentation</p></li>
		<li><p><a href="https://api.census.gov/data/timeseries/intltrade/exports/hs/variables.html">API Variables</a> - Full list of available fields</p></li>
		<li><p><a href="https://www.census.gov/foreign-trade/schedules/b/index.html">Schedule B Codes</a> - Product classification codes for detailed commodity analysis</p></li>
		<li><p><a href="censusapi.html">Part 1: Manufacturing Data</a> - Basic Census API example with M3 survey data</p></li>
	</ul>
	</article>
	<div class="subfooter">
	    <a href="censusapi.html">&laquo; Back (Part 1)</a>
	</div>
	</section>
	</main>

		<footer>
		<div class="footer_left">
			<p><time datetime="2026">2026</time>, by Brian Dew</p>
		</div>
		<div class="footer_right">
			<a href="https://github.com/bdecon/" aria-label="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>
			<a href="https://www.linkedin.com/in/brian-dew-5788a386/" aria-label="LinkedIn"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
			<a href="https://twitter.com/bd_econ" aria-label="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a>
			<a href="https://briandew.wordpress.com/" aria-label="WordPress Blog"><i class="fa fa-wordpress" aria-hidden="true"></i></a>
		</div>
	</footer>
	<script>
		function responsiveNav() {
			const menu = document.getElementById("menu");
			const button = document.querySelector(".icon button");
			menu.classList.toggle("responsive");
			const expanded = menu.classList.contains("responsive");
			button.setAttribute("aria-expanded", expanded);
		}
	</script>
</body>
</html>
