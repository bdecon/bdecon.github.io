<!DOCTYPE html>
<html lang="en">
<head>
	<meta id="meta" name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>BD Economics | IMF API Guide, Part 2</title>
	<link rel="stylesheet" href="add-ins/github.css">
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<meta charset="UTF-8">
	<meta name="description" content="Python tutorial: Discovering IMF datasets and parameters with sdmx1, plus an advanced UK trade example.">
	<meta name="keywords" content="IMF API, sdmx1, SDMX Python, dataflow, codelist, Economics Dashboard, Macroeconomics Dashboard, International Monetary Fund, IMF Statistics Department, Python pandas, economic data API, UK trade">
	<meta name="author" content="Brian Dew">
	<link rel="canonical" href="https://bd-econ.com/imfapi2.html">
	<!-- Open Graph -->
	<meta property="og:title" content="IMF API Guide, Part 2">
	<meta property="og:description" content="Python tutorial: Discovering IMF datasets and parameters with sdmx1, plus an advanced UK trade example.">
	<meta property="og:url" content="https://bd-econ.com/imfapi2.html">
	<meta property="og:type" content="article">
	<meta property="og:image" content="https://bd-econ.com/images/01_bdlogo.png">
	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:title" content="IMF API Guide, Part 2">
	<meta name="twitter:description" content="Python tutorial: Discovering IMF datasets and parameters with sdmx1, plus an advanced UK trade example.">
	<meta name="twitter:image" content="https://bd-econ.com/images/01_bdlogo.png">
	<link rel="apple-touch-icon" sizes="57x57" href="favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="favicon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="favicon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
	<link rel="manifest" href="favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="favicon/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "headline": "IMF API Python Tutorial, Part 2",
    "description": "Python tutorial: Discovering IMF datasets and parameters with sdmx1, plus an advanced UK trade example.",
    "author": {
        "@type": "Person",
        "name": "Brian Dew"
    },
    "publisher": {
        "@type": "Organization",
        "name": "BD Economics",
        "url": "https://bd-econ.com"
    },
    "mainEntityOfPage": "https://bd-econ.com/imfapi2.html"
}
</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PGVF5S620Y"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PGVF5S620Y');
</script>

</head>
<body>
	<nav>
		<ul class="ul_nav" id="menu">
			<li class="nav_main"> <a href="index.html">BD Economics</a> </li>
			<li><a href="about.html">About</a> </li>
			<li><a href="https://briandew.wordpress.com">Blog</a> </li>
			<li><a href="python.html" class="active">Guides &darr;</a>
				<ul class="hidden">
					<li><a href="imfapi1.html">IMF API</a></li>
					<li><a href="blsapi.html">BLS API</a></li>
					<li><a href="beaapi.html">BEA API</a></li>
					<li><a href="censusapi.html">Census API</a></li>
					<li><a href="treasuryapi.html">Treasury API</a></li>
					<li><a href="cps.html">CPS Microdata</a></li>
			</ul>
			</li>
		<li>
			<a href="reports.html">Reports &darr;</a>
			<ul class="hidden">
				<li><a href="chartbook.html">US Chartbook</a></li>
				<li><a href="indicators.html">Economic Indicators</a></li>
			</ul>
			</li>
			<li class="icon">
				<button type="button" onclick="responsiveNav()" aria-label="Toggle navigation menu" aria-expanded="false">&#9776;</button>
			</li>
		</ul>
	</nav>
	<header>
	<h1>IMF API</h1>
	</header>
	<main>
	<section>
	<article class="article_links">
	<a href="imfapi1.html">
	<div class="card_dull">
	  <div class="card_banner_wrap card_banner_wrap_blue">
	    <img src="images/imf_banner1.png" alt="IMF API tutorial Part 1" class="card_banner">
	  </div>
	  <div class="card_head_blue">
		<h2>Part 1</h2>
	  </div>
	  <div class="card_tail">
		<p>A <strong>basic example</strong> of retrieving CPI inflation data using the sdmx1 library, converting to pandas, and plotting results.</p>
	  </div>
	</div>
	</a>
	<a href="imfapi2.html">
	<div class="card">
	  <div class="card_banner_wrap card_banner_wrap_blue">
	    <img src="images/imf_banner.png" alt="IMF API tutorial Part 2" class="card_banner">
	  </div>
	  <div class="card_head_blue">
		<h2>Part 2</h2>
	  </div>
	  <div class="card_tail">
		<p>How to <strong>find datasets and parameters</strong> using dataflow and codelist methods, plus an advanced UK trade example.</p>
	  </div>
	</div>
	</a>
	</article>
	<article class="article_code">
	<h3> IMF API with Python: Finding Datasets and Parameters </h3>
	<p>Part 1 showed a basic example of retrieving data. Here in Part 2, we explore how to discover available datasets and find the correct parameter codes using the sdmx1 library's <code>dataflow()</code> and <code>codelist</code> methods.</p>

	<h3 class="section-title">Searching for Datasets</h3>
	<p>The <code>dataflow()</code> method returns information about all available datasets. We can search through these to find datasets of interest:</p>
	<p>In[1]:</p>
	<pre><code class="python">import sdmx

IMF_DATA = sdmx.Client('IMF_DATA')

# Get all dataflows
f = IMF_DATA.dataflow()

# Search for datasets containing "Trade"
{i: v for i, v in f.dataflow.items() if 'Trade' in v.name['en']}</code></pre>
	<p>Out[1]:</p>
<pre>{'ITG_WCA': &lt;DataflowDefinition IMF.STA:ITG_WCA(2.0.4): International Trade in Goods, World and Country Aggregates&gt;,
 'CTOT': &lt;DataflowDefinition IMF.RES:CTOT(5.0.1): Commodity Terms of Trade (CTOT)&gt;,
 'ITG': &lt;DataflowDefinition IMF.STA:ITG(4.0.0): International Trade in Goods (ITG)&gt;,
 'TEG': &lt;DataflowDefinition IMF.STA:TEG(3.0.2): Trade in Low Carbon Technology Goods (TEG)&gt;,
 'ITS': &lt;DataflowDefinition IMF.RES:ITS(3.0.1): International Trade in Services (ITS)&gt;,
 'IMTS': &lt;DataflowDefinition IMF.STA:IMTS(1.0.0): International Trade in Goods (by partner country) (IMTS)&gt;}</pre>
	<p>The dictionary comprehension filters datasets whose English name contains "Trade". Each result shows the dataset ID (e.g., <code>IMTS</code>) and a description.</p>

	<h3 class="section-title">Getting Dataset Structure</h3>
	<p>Once you identify a dataset, retrieve its structure to find the available dimensions. The dimensions determine how you construct the key for your data request:</p>
	<p>In[2]:</p>
	<pre><code class="python"># Get metadata for 'IMTS'
f = IMF_DATA.dataflow('IMTS')
dsd = f.structure['DSD_IMTS']
dsd.dimensions.components</code></pre>
	<p>Out[2]:</p>
<pre>[&lt;Dimension COUNTRY&gt;,
 &lt;Dimension INDICATOR&gt;,
 &lt;Dimension COUNTERPART_COUNTRY&gt;,
 &lt;Dimension FREQUENCY&gt;,
 &lt;TimeDimension TIME_PERIOD&gt;]</pre>
	<p>This tells us the IMTS dataset has four dimensions plus time: country, indicator, counterpart country (trading partner), and frequency. The key string must specify values for each dimension in this order.</p>

	<h3 class="section-title">Finding Dimension Codes</h3>
	<p>Use the <code>codelist</code> attribute to find valid codes for each dimension. Here we look up available indicators:</p>
	<p>In[3]:</p>
	<pre><code class="python"># Indicator codes
codes = f.codelist.CL_IMTS_INDICATOR
sdmx.to_pandas(codes)</code></pre>
	<p>Out[3]:</p>
<pre>CL_IMTS_INDICATOR
XG_FOB_USD     Exports of goods, Free on board (FOB), US dollar
MG_FOB_USD     Imports of goods, Free on board (FOB), US dollar
MG_CIF_USD    Imports of goods, Cost insurance freight (CIF)...
TBG_USD                          Trade balance goods, US dollar
Name: International Trade in Goods (by partner country) (IMTS) Indicator, dtype: object</pre>
	<p>We can also search within a codelist. Here we find the code for "World" in the country list:</p>
	<p>In[4]:</p>
	<pre><code class="python"># Country codes - search for specific values
codes = f.codelist.CL_IMTS_COUNTRY
res = sdmx.to_pandas(codes)
res.loc[res.str.contains('World')]</code></pre>
	<p>Out[4]:</p>
<pre>CL_IMTS_COUNTRY
G001    World
Name: International Trade in Goods (by partner country) (IMTS) Country, dtype: object</pre>

	<h3 class="section-title">Advanced Example: UK Imports from the EU</h3>
	<p>Using what we've learned, let's calculate the European Union's share of UK goods imports over time. The key <code>GBR.MG_CIF_USD.G001+G998.M</code> requests UK imports from both World (<code>G001</code>) and EU (<code>G998</code>) at monthly frequency:</p>
	<p>In[5]:</p>
	<pre><code class="python">import pandas as pd

# Retrieve data: UK imports from World (G001) and EU (G998)
data_msg = IMF_DATA.data('IMTS', key='GBR.MG_CIF_USD.G001+G998.M')

# Convert to pandas
df = sdmx.to_pandas(data_msg).reset_index()
df = df.set_index(['TIME_PERIOD', 'COUNTERPART_COUNTRY'])['value'].unstack()
df.index = pd.to_datetime(df.index, format='%Y-M%m')</code></pre>
	<p>With both series in our DataFrame, we can calculate the EU share and apply a 12-month moving average to smooth seasonal variation:</p>
	<p>In[6]:</p>
	<pre><code class="python"># Calculate EU share of UK imports of goods
eu_share = ((df['G998'] / df['G001']) * 100).rolling(12).mean()

# Create a line plot
title = "U.K. imports of goods: European Union share of total"
recent = f"{eu_share.index[-1].strftime('%B %Y')}: {eu_share.iloc[-1]:.1f}%"
ax = eu_share.plot(title=title)
ax = ax.set_xlabel(recent)</code></pre>
	<p>Out[6]:</p>
	<img src="images/uk_imports_eu_share.png" alt="UK Imports EU Share" loading="lazy"/>

	<h3 class="section-title">Additional Resources</h3>
	<ul>
		<li><p><a href="https://pypi.org/project/sdmx1/">sdmx1 on PyPI</a> - Installation and basic documentation</p></li>
		<li><p><a href="https://sdmx1.readthedocs.io/">sdmx1 documentation</a> - Full library reference</p></li>
		<li><p><a href="https://data.imf.org/">IMF Data Portal</a> - Browse available datasets interactively</p></li>
	</ul>
	</article>
	<div class="subfooter">
	    <a href="imfapi1.html">&laquo; Back (Part 1)</a>
	</div>
	</section>
	</main>

		<footer>
		<div class="footer_left">
			<p><time datetime="2026-01">January 2026</time><br> by Brian Dew</p>
		</div>
		<div class="footer_right">
			<a href="https://github.com/bdecon/" aria-label="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>
			<a href="https://www.linkedin.com/in/brian-dew-5788a386/" aria-label="LinkedIn"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
			<a href="https://twitter.com/bd_econ" aria-label="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a>
			<a href="https://briandew.wordpress.com/" aria-label="WordPress Blog"><i class="fa fa-wordpress" aria-hidden="true"></i></a>
		</div>
	</footer>
	<script>
		function responsiveNav() {
			const menu = document.getElementById("menu");
			const button = document.querySelector(".icon button");
			menu.classList.toggle("responsive");
			const expanded = menu.classList.contains("responsive");
			button.setAttribute("aria-expanded", expanded);
		}
	</script>
	<script src="add-ins/highlight.pack.js"></script>
	<script>hljs.initHighlighting();</script>
</body>
</html>
